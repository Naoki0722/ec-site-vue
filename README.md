# 徳田家宝飾店ECサイトアプリ構築

## Project setup
```
yarn install
```

### Compiles and hot-reloads for development
```
yarn serve
```

### Compiles and minifies for production
```
yarn build
```

### Lints and fixes files
```
yarn lint
```

## コーディング実装履歴

### 2021.02.06
デザインのコーディングについて実施。
表側のデザインのCSSについてはTailwindcssを用いて実装。
感触としては、CSSの場合、自分でクラス名を当てることで、CSS側で実装を確認していかないといけないが、
Tailwindcssの場合は、インライン記述の方式のため、すごく理解しやすい。
レスポンシブもlg:やmd:で簡単に実装できる。
インラインだとhtml側の記述が煩雑になる一方、そこだけを見て判断できるし、コード量も減らせると感じる。

### 2021.02.08 デザイン修正


### 2021.02.14 コードレビュー依頼
バックエンド(Laravel)とのつなぎ込みが完成した。
本番デプロイについては、Netlifyを使用する予定としており、Netlifyのformを使いたいため、staging環境としてデプロイした。

https://amazing-wilson-5152ff.netlify.app/

こちらはステージング環境として利用するため、githubはdevelopブランチと連携するようにしている。

カート機能とお気に入り機能は、ログインしたり会員登録していない人でもできるように実装した(Vuexのセッション保持を利用)

ログインしていない状態でカートに入れたものはログイン後にcartsテーブルに格納するようにもしている。

バックエンド(Laravel)は、Herokuを利用。

https://gentle-wildwood-14193.herokuapp.com/


### 2021.03.14 実装履歴
前回の実装から、商品の登録等が画面側からできなかったため、管理画面作成を実施した。
管理画面作成において、管理者以外がログインできないように工夫

1. バックエンド側で管理者orユーザーのどちらかを判別するために「role」というカラムを追加した。

2. firebaseログイン時にトークンを取得し、トークンをバックエンド(Laravel)側へ送信

3. Laravel側で受け取ったトークンを元にユーザーを識別。識別後管理者であるかを判別し、一定の機能はミドルウェアにて制限している(商品登録や削除など)

また、不要なメールアドレスを登録するのを避けるため、firebaseのメールアドレスとパスワードでの登録後、メール認証を送信するようにした。

その後、メール認証していないユーザーはログインできないようにしている。

さらに、パスワードを忘れた方にパスワードリセットメール送信するページを作成した。